{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/nanyang/AY20S2/CS9080/LookingGlass/lookingglass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import TLError from\"../core/TLError\";var css_named_colors={\"aliceblue\":\"#f0f8ff\",\"antiquewhite\":\"#faebd7\",\"aqua\":\"#00ffff\",\"aquamarine\":\"#7fffd4\",\"azure\":\"#f0ffff\",\"beige\":\"#f5f5dc\",\"bisque\":\"#ffe4c4\",\"black\":\"#000000\",\"blanchedalmond\":\"#ffebcd\",\"blue\":\"#0000ff\",\"blueviolet\":\"#8a2be2\",\"brown\":\"#a52a2a\",\"burlywood\":\"#deb887\",\"cadetblue\":\"#5f9ea0\",\"chartreuse\":\"#7fff00\",\"chocolate\":\"#d2691e\",\"coral\":\"#ff7f50\",\"cornflowerblue\":\"#6495ed\",\"cornsilk\":\"#fff8dc\",\"crimson\":\"#dc143c\",\"cyan\":\"#00ffff\",\"darkblue\":\"#00008b\",\"darkcyan\":\"#008b8b\",\"darkgoldenrod\":\"#b8860b\",\"darkgray\":\"#a9a9a9\",\"darkgreen\":\"#006400\",\"darkkhaki\":\"#bdb76b\",\"darkmagenta\":\"#8b008b\",\"darkolivegreen\":\"#556b2f\",\"darkorange\":\"#ff8c00\",\"darkorchid\":\"#9932cc\",\"darkred\":\"#8b0000\",\"darksalmon\":\"#e9967a\",\"darkseagreen\":\"#8fbc8f\",\"darkslateblue\":\"#483d8b\",\"darkslategray\":\"#2f4f4f\",\"darkturquoise\":\"#00ced1\",\"darkviolet\":\"#9400d3\",\"deeppink\":\"#ff1493\",\"deepskyblue\":\"#00bfff\",\"dimgray\":\"#696969\",\"dodgerblue\":\"#1e90ff\",\"firebrick\":\"#b22222\",\"floralwhite\":\"#fffaf0\",\"forestgreen\":\"#228b22\",\"fuchsia\":\"#ff00ff\",\"gainsboro\":\"#dcdcdc\",\"ghostwhite\":\"#f8f8ff\",\"gold\":\"#ffd700\",\"goldenrod\":\"#daa520\",\"gray\":\"#808080\",\"green\":\"#008000\",\"greenyellow\":\"#adff2f\",\"honeydew\":\"#f0fff0\",\"hotpink\":\"#ff69b4\",\"indianred\":\"#cd5c5c\",\"indigo\":\"#4b0082\",\"ivory\":\"#fffff0\",\"khaki\":\"#f0e68c\",\"lavender\":\"#e6e6fa\",\"lavenderblush\":\"#fff0f5\",\"lawngreen\":\"#7cfc00\",\"lemonchiffon\":\"#fffacd\",\"lightblue\":\"#add8e6\",\"lightcoral\":\"#f08080\",\"lightcyan\":\"#e0ffff\",\"lightgoldenrodyellow\":\"#fafad2\",\"lightgray\":\"#d3d3d3\",\"lightgreen\":\"#90ee90\",\"lightpink\":\"#ffb6c1\",\"lightsalmon\":\"#ffa07a\",\"lightseagreen\":\"#20b2aa\",\"lightskyblue\":\"#87cefa\",\"lightslategray\":\"#778899\",\"lightsteelblue\":\"#b0c4de\",\"lightyellow\":\"#ffffe0\",\"lime\":\"#00ff00\",\"limegreen\":\"#32cd32\",\"linen\":\"#faf0e6\",\"magenta\":\"#ff00ff\",\"maroon\":\"#800000\",\"mediumaquamarine\":\"#66cdaa\",\"mediumblue\":\"#0000cd\",\"mediumorchid\":\"#ba55d3\",\"mediumpurple\":\"#9370db\",\"mediumseagreen\":\"#3cb371\",\"mediumslateblue\":\"#7b68ee\",\"mediumspringgreen\":\"#00fa9a\",\"mediumturquoise\":\"#48d1cc\",\"mediumvioletred\":\"#c71585\",\"midnightblue\":\"#191970\",\"mintcream\":\"#f5fffa\",\"mistyrose\":\"#ffe4e1\",\"moccasin\":\"#ffe4b5\",\"navajowhite\":\"#ffdead\",\"navy\":\"#000080\",\"oldlace\":\"#fdf5e6\",\"olive\":\"#808000\",\"olivedrab\":\"#6b8e23\",\"orange\":\"#ffa500\",\"orangered\":\"#ff4500\",\"orchid\":\"#da70d6\",\"palegoldenrod\":\"#eee8aa\",\"palegreen\":\"#98fb98\",\"paleturquoise\":\"#afeeee\",\"palevioletred\":\"#db7093\",\"papayawhip\":\"#ffefd5\",\"peachpuff\":\"#ffdab9\",\"peru\":\"#cd853f\",\"pink\":\"#ffc0cb\",\"plum\":\"#dda0dd\",\"powderblue\":\"#b0e0e6\",\"purple\":\"#800080\",\"rebeccapurple\":\"#663399\",\"red\":\"#ff0000\",\"rosybrown\":\"#bc8f8f\",\"royalblue\":\"#4169e1\",\"saddlebrown\":\"#8b4513\",\"salmon\":\"#fa8072\",\"sandybrown\":\"#f4a460\",\"seagreen\":\"#2e8b57\",\"seashell\":\"#fff5ee\",\"sienna\":\"#a0522d\",\"silver\":\"#c0c0c0\",\"skyblue\":\"#87ceeb\",\"slateblue\":\"#6a5acd\",\"slategray\":\"#708090\",\"snow\":\"#fffafa\",\"springgreen\":\"#00ff7f\",\"steelblue\":\"#4682b4\",\"tan\":\"#d2b48c\",\"teal\":\"#008080\",\"thistle\":\"#d8bfd8\",\"tomato\":\"#ff6347\",\"turquoise\":\"#40e0d0\",\"violet\":\"#ee82ee\",\"wheat\":\"#f5deb3\",\"white\":\"#ffffff\",\"whitesmoke\":\"#f5f5f5\",\"yellow\":\"#ffff00\",\"yellowgreen\":\"#9acd32\"};function intToHexString(i){return pad(parseInt(i,10).toString(16));}export function hexToRgb(hex){// Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\nif(css_named_colors[hex.toLowerCase()]){hex=css_named_colors[hex.toLowerCase()];}var shorthandRegex=/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b;});var result=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null;}// given an object with r, g, and b keys, or a string of the form 'rgb(mm,nn,ll)', return a CSS hex string including the leading '#' character\nexport function rgbToHex(rgb){var r,g,b;if(typeof rgb=='object'){r=rgb.r;g=rgb.g;b=rgb.b;}else if(typeof rgb.match=='function'){var parts=rgb.match(/^rgb\\((\\d+),(\\d+),(\\d+)\\)$/);if(parts){r=parts[1];g=parts[2];b=parts[3];}}if(isNaN(r)||isNaN(b)||isNaN(g)){throw new TLError(\"invalid_rgb_err\");}return\"#\"+intToHexString(r)+intToHexString(g)+intToHexString(b);}export function mergeData(data_main,data_to_merge){var x;for(x in data_to_merge){if(Object.prototype.hasOwnProperty.call(data_to_merge,x)){data_main[x]=data_to_merge[x];}}return data_main;}export function isTrue(s){if(s==null)return false;return s==true||String(s).toLowerCase()=='true'||Number(s)==1;}// like mergeData but takes an arbitrarily long list of sources to merge.\nexport function extend(/*Object*/dest)/*-> Object*/{// merge src properties into dest\nvar sources=Array.prototype.slice.call(arguments,1);for(var j=0,len=sources.length,src;j<len;j++){src=sources[j]||{};mergeData(dest,src);}return dest;}var TRACE_HANDLERS=[];/**\n * Register a callback to be executed when trace is called in this runtime.\n * Callbacks will be called with whatever was passed to `trace` which is \n * expected to be a string.\n * @param {callable} cb \n */export function addTraceHandler(cb){TRACE_HANDLERS.push(cb);}/**\n * Pass the given `msg` to each registered trace handler.\n * This is a crude adaptation of the original Timeline trace\n * function which assumed access to a global `debug` flag.\n * \n * @param {string} msg \n */export function trace(msg){TRACE_HANDLERS.forEach(function(cb){try{cb(msg);}catch(e){if(console&&console.log){console.log(\"Error handling trace\",e);}}});}export function pad(val,len){val=String(val);len=len||2;while(val.length<len){val=\"0\"+val;}return val;}export var stamp=function(){var lastId=0,key='_tl_id';return function(/*Object*/obj){obj[key]=obj[key]||++lastId;return obj[key];};}();/**\n * Remove any leading or trailing whitespace from the given string.\n * If `str` is undefined or does not have a `replace` function, return\n * an empty string.\n */export function trim(str){if(str&&typeof str.replace=='function'){return str.replace(/^\\s+|\\s+$/g,'');}return\"\";}export function maxDepth(ary){// given a sorted array of 2-tuples of numbers, count how many \"deep\" the items are.\n// that is, what is the maximum number of tuples that occupy any one moment\n// each tuple should also be sorted\nvar stack=[];var max_depth=0;for(var i=0;i<ary.length;i++){stack.push(ary[i]);if(stack.length>1){var top=stack[stack.length-1];var bottom_idx=-1;for(var j=0;j<stack.length-1;j++){if(stack[j][1]<top[0]){bottom_idx=j;}};if(bottom_idx>=0){stack=stack.slice(bottom_idx+1);}}if(stack.length>max_depth){max_depth=stack.length;}};return max_depth;}/**\n * Implement mixin behavior. Based on \n *     https://blog.bitsrc.io/understanding-mixins-in-javascript-de5d3e02b466\n * @param {class} cls \n * @param  {...class} src \n */export function classMixin(cls){for(var _len=arguments.length,src=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){src[_key-1]=arguments[_key];}for(var _i=0,_src=src;_i<_src.length;_i++){var _cl=_src[_i];var _iterator=_createForOfIteratorHelper(Object.getOwnPropertyNames(_cl.prototype)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;cls.prototype[key]=_cl.prototype[key];}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}export function ensureUniqueKey(obj,candidate){if(!candidate){candidate=unique_ID(6);}if(!(candidate in obj)){return candidate;}var root=candidate.match(/^(.+)(-\\d+)?$/)[1];var similar_ids=[];// get an alternative\nfor(var key in obj){if(key.match(/^(.+?)(-\\d+)?$/)[1]==root){similar_ids.push(key);}}candidate=root+\"-\"+(similar_ids.length+1);for(var counter=similar_ids.length;similar_ids.indexOf(candidate)!=-1;counter++){candidate=root+'-'+counter;}return candidate;}export function isEmptyObject(o){var properties=[];if(Object.keys){properties=Object.keys(o);}else{// all this to support IE 8\nfor(var p in o){if(Object.prototype.hasOwnProperty.call(o,p))properties.push(p);}}for(var i=0;i<properties.length;i++){var k=properties[i];if(o[k]!=null&&typeof o[k]!=\"string\")return false;if(trim(o[k]).length!=0)return false;}return true;}export function slugify(str){// borrowed from http://stackoverflow.com/a/5782563/102476\nstr=trim(str);str=str.toLowerCase();// remove accents, swap ñ for n, etc\nvar from=\"ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;\";var to=\"aaaaaeeeeeiiiiooooouuuunc------\";for(var i=0,l=from.length;i<l;i++){str=str.replace(new RegExp(from.charAt(i),'g'),to.charAt(i));}str=str.replace(/[^a-z0-9 -]/g,'')// remove invalid chars\n.replace(/\\s+/g,'-')// collapse whitespace and replace by -\n.replace(/-+/g,'-');// collapse dashes\nstr=str.replace(/^([0-9])/,'_$1');return str;}export function unique_ID(size,prefix){var getRandomNumber=function getRandomNumber(range){return Math.floor(Math.random()*range);};var getRandomChar=function getRandomChar(){var chars=\"abcdefghijklmnopqurstuvwxyz\";return chars.substr(getRandomNumber(32),1);};var randomID=function randomID(size){var str=\"\";for(var i=0;i<size;i++){str+=getRandomChar();}return str;};if(prefix){return prefix+\"-\"+randomID(size);}else{return\"tl-\"+randomID(size);}}export function findNextGreater(list,current,default_value){// given a sorted list and a current value which *might* be in the list,\n// return the next greatest value if the current value is >= the last item in the list, return default,\n// or if default is undefined, return input value\nfor(var i=0;i<list.length;i++){if(current<list[i]){return list[i];}}return default_value?default_value:current;}export function findNextLesser(list,current,default_value){// given a sorted list and a current value which *might* be in the list,\n// return the next lesser value if the current value is <= the last item in the list, return default,\n// or if default is undefined, return input value\nfor(var i=list.length-1;i>=0;i--){if(current>list[i]){return list[i];}}return default_value?default_value:current;}export function isEven(n){return n==parseFloat(n)?!(n%2):void 0;}export function findArrayNumberByUniqueID(id,array,prop,defaultVal){var _n=defaultVal||0;for(var i=0;i<array.length;i++){if(array[i].data[prop]==id){_n=i;}};return _n;}export function unlinkify(text){if(!text)return text;text=text.replace(/<a\\b[^>]*>/i,\"\");text=text.replace(/<\\/a>/i,\"\");return text;}export function setData(obj,data){obj.data=extend({},obj.data,data);if(obj.data.unique_id===\"\"){obj.data.unique_id=unique_ID(6);}}export function htmlify(str){//if (str.match(/<\\s*p[^>]*>([^<]*)<\\s*\\/\\s*p\\s*>/)) {\nif(str.match(/<p>[\\s\\S]*?<\\/p>/)){return str;}else{return\"<p>\"+str+\"</p>\";}}export function unhtmlify(str){str=str.replace(/(<[^>]*>)+/g,'');return str.replace('\"',\"'\");}/*\t* Turns plain text links into real links\n================================================== */export function linkify(text,targets,is_touch){var make_link=function make_link(url,link_text,prefix){if(!prefix){prefix=\"\";}var MAX_LINK_TEXT_LENGTH=30;if(link_text&&link_text.length>MAX_LINK_TEXT_LENGTH){link_text=link_text.substring(0,MAX_LINK_TEXT_LENGTH)+\"\\u2026\";// unicode ellipsis\n}return prefix+\"<a class='tl-makelink' href='\"+url+\"' onclick='void(0)'>\"+link_text+\"</a>\";};// http://, https://, ftp://\nvar urlPattern=/\\b(?:https?|ftp):\\/\\/([a-z0-9-+&@#\\/%?=~_|!:,.;]*[a-z0-9-+&@#\\/%=~_|])/gim;// www. sans http:// or https://\nvar pseudoUrlPattern=/(^|[^\\/>])(www\\.[\\S]+(\\b|$))/gim;// Email addresses\nvar emailAddressPattern=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+)/gim;return text.replace(urlPattern,function(match,url_sans_protocol,offset,string){// Javascript doesn't support negative lookbehind assertions, so\n// we need to handle risk of matching URLs in legit hrefs\nif(offset>0){var prechar=string[offset-1];if(prechar=='\"'||prechar==\"'\"||prechar==\"=\"){return match;}}return make_link(match,url_sans_protocol);}).replace(pseudoUrlPattern,function(match,beforePseudo,pseudoUrl,offset,string){return make_link('http://'+pseudoUrl,pseudoUrl,beforePseudo);}).replace(emailAddressPattern,function(match,email,offset,string){return make_link('mailto:'+email,email);});}/**\n * Try to make seamless the process of interpreting a URL to a web page which embeds an image for sharing purposes\n * as a direct image link. Some services have predictable transformations we can use rather than explain to people\n * this subtlety.\n */export function transformImageURL(url){return url.replace(/(.*)www.dropbox.com\\/(.*)/,'$1dl.dropboxusercontent.com/$2');}export var ratio={square:function square(size){var s={w:0,h:0};if(size.w>size.h&&size.h>0){s.h=size.h;s.w=size.h;}else{s.w=size.w;s.h=size.w;}return s;},r16_9:function r16_9(size){if(size.w!==null&&size.w!==\"\"){return Math.round(size.w/16*9);}else if(size.h!==null&&size.h!==\"\"){return Math.round(size.h/9*16);}else{return 0;}},r4_3:function r4_3(size){if(size.w!==null&&size.w!==\"\"){return Math.round(size.w/4*3);}else if(size.h!==null&&size.h!==\"\"){return Math.round(size.h/3*4);}}};export function getUrlVars(string){var str,vars=[],hash,hashes;str=string.toString();if(str.match('&#038;')){str=str.replace(\"&#038;\",\"&\");}else if(str.match('&#38;')){str=str.replace(\"&#38;\",\"&\");}else if(str.match('&amp;')){str=str.replace(\"&amp;\",\"&\");}hashes=str.slice(str.indexOf('?')+1).split('&');for(var i=0;i<hashes.length;i++){hash=hashes[i].split('=');vars.push(hash[0]);vars[hash[0]]=hash[1];}return vars;}export function getParamString(obj){var params=[];for(var i in obj){if(obj.hasOwnProperty(i)){params.push(i+'='+obj[i]);}}return'?'+params.join('&');}export function getObjectAttributeByIndex(obj,index){if(typeof obj!='undefined'){var i=0;for(var attr in obj){if(index===i){return obj[attr];}i++;}return\"\";}else{return\"\";}}var base58=function(alpha){var alphabet=alpha||'123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ',base=alphabet.length;return{encode:function encode(enc){if(typeof enc!=='number'||enc!==parseInt(enc))throw'\"encode\" only accepts integers.';var encoded='';while(enc){var remainder=enc%base;enc=Math.floor(enc/base);encoded=alphabet[remainder].toString()+encoded;}return encoded;},decode:function decode(dec){if(typeof dec!=='string')throw'\"decode\" only accepts strings.';var decoded=0;while(dec){var alphabetPosition=alphabet.indexOf(dec[0]);if(alphabetPosition<0)throw'\"decode\" can\\'t find \"'+dec[0]+'\" in the alphabet: \"'+alphabet+'\"';var powerOf=dec.length-1;decoded+=alphabetPosition*Math.pow(base,powerOf);dec=dec.substring(1);}return decoded;}};}();export{base58};export function parseYouTubeTime(s){// given a YouTube start time string in a reasonable format, reduce it to a number of seconds as an integer.\nif(typeof s=='string'){var parts=s.match(/^\\s*(\\d+h)?(\\d+m)?(\\d+s)?\\s*/i);if(parts){var hours=parseInt(parts[1])||0;var minutes=parseInt(parts[2])||0;var seconds=parseInt(parts[3])||0;return seconds+minutes*60+hours*60*60;}}else if(typeof s=='number'){return s;}return 0;}export function stripMarkup(txt){var doc=new DOMParser().parseFromString(txt,'text/html');return doc.body.textContent||\"\";}","map":{"version":3,"sources":["/Users/nanyang/AY20S2/CS9080/LookingGlass/lookingglass/src/core/Util.js"],"names":["TLError","css_named_colors","intToHexString","i","pad","parseInt","toString","hexToRgb","hex","toLowerCase","shorthandRegex","replace","m","r","g","b","result","exec","rgbToHex","rgb","match","parts","isNaN","mergeData","data_main","data_to_merge","x","Object","prototype","hasOwnProperty","call","isTrue","s","String","Number","extend","dest","sources","Array","slice","arguments","j","len","length","src","TRACE_HANDLERS","addTraceHandler","cb","push","trace","msg","forEach","e","console","log","val","stamp","lastId","key","obj","trim","str","maxDepth","ary","stack","max_depth","top","bottom_idx","classMixin","cls","_cl","getOwnPropertyNames","ensureUniqueKey","candidate","unique_ID","root","similar_ids","counter","indexOf","isEmptyObject","o","properties","keys","p","k","slugify","from","to","l","RegExp","charAt","size","prefix","getRandomNumber","range","Math","floor","random","getRandomChar","chars","substr","randomID","findNextGreater","list","current","default_value","findNextLesser","isEven","n","parseFloat","findArrayNumberByUniqueID","id","array","prop","defaultVal","_n","data","unlinkify","text","setData","unique_id","htmlify","unhtmlify","linkify","targets","is_touch","make_link","url","link_text","MAX_LINK_TEXT_LENGTH","substring","urlPattern","pseudoUrlPattern","emailAddressPattern","url_sans_protocol","offset","string","prechar","beforePseudo","pseudoUrl","email","transformImageURL","ratio","square","w","h","r16_9","round","r4_3","getUrlVars","vars","hash","hashes","split","getParamString","params","join","getObjectAttributeByIndex","index","attr","base58","alpha","alphabet","base","encode","enc","encoded","remainder","decode","dec","decoded","alphabetPosition","powerOf","pow","parseYouTubeTime","hours","minutes","seconds","stripMarkup","txt","doc","DOMParser","parseFromString","body","textContent"],"mappings":"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","sourcesContent":["import TLError from \"../core/TLError\"\n\nconst css_named_colors = {\n    \"aliceblue\": \"#f0f8ff\",\n    \"antiquewhite\": \"#faebd7\",\n    \"aqua\": \"#00ffff\",\n    \"aquamarine\": \"#7fffd4\",\n    \"azure\": \"#f0ffff\",\n    \"beige\": \"#f5f5dc\",\n    \"bisque\": \"#ffe4c4\",\n    \"black\": \"#000000\",\n    \"blanchedalmond\": \"#ffebcd\",\n    \"blue\": \"#0000ff\",\n    \"blueviolet\": \"#8a2be2\",\n    \"brown\": \"#a52a2a\",\n    \"burlywood\": \"#deb887\",\n    \"cadetblue\": \"#5f9ea0\",\n    \"chartreuse\": \"#7fff00\",\n    \"chocolate\": \"#d2691e\",\n    \"coral\": \"#ff7f50\",\n    \"cornflowerblue\": \"#6495ed\",\n    \"cornsilk\": \"#fff8dc\",\n    \"crimson\": \"#dc143c\",\n    \"cyan\": \"#00ffff\",\n    \"darkblue\": \"#00008b\",\n    \"darkcyan\": \"#008b8b\",\n    \"darkgoldenrod\": \"#b8860b\",\n    \"darkgray\": \"#a9a9a9\",\n    \"darkgreen\": \"#006400\",\n    \"darkkhaki\": \"#bdb76b\",\n    \"darkmagenta\": \"#8b008b\",\n    \"darkolivegreen\": \"#556b2f\",\n    \"darkorange\": \"#ff8c00\",\n    \"darkorchid\": \"#9932cc\",\n    \"darkred\": \"#8b0000\",\n    \"darksalmon\": \"#e9967a\",\n    \"darkseagreen\": \"#8fbc8f\",\n    \"darkslateblue\": \"#483d8b\",\n    \"darkslategray\": \"#2f4f4f\",\n    \"darkturquoise\": \"#00ced1\",\n    \"darkviolet\": \"#9400d3\",\n    \"deeppink\": \"#ff1493\",\n    \"deepskyblue\": \"#00bfff\",\n    \"dimgray\": \"#696969\",\n    \"dodgerblue\": \"#1e90ff\",\n    \"firebrick\": \"#b22222\",\n    \"floralwhite\": \"#fffaf0\",\n    \"forestgreen\": \"#228b22\",\n    \"fuchsia\": \"#ff00ff\",\n    \"gainsboro\": \"#dcdcdc\",\n    \"ghostwhite\": \"#f8f8ff\",\n    \"gold\": \"#ffd700\",\n    \"goldenrod\": \"#daa520\",\n    \"gray\": \"#808080\",\n    \"green\": \"#008000\",\n    \"greenyellow\": \"#adff2f\",\n    \"honeydew\": \"#f0fff0\",\n    \"hotpink\": \"#ff69b4\",\n    \"indianred\": \"#cd5c5c\",\n    \"indigo\": \"#4b0082\",\n    \"ivory\": \"#fffff0\",\n    \"khaki\": \"#f0e68c\",\n    \"lavender\": \"#e6e6fa\",\n    \"lavenderblush\": \"#fff0f5\",\n    \"lawngreen\": \"#7cfc00\",\n    \"lemonchiffon\": \"#fffacd\",\n    \"lightblue\": \"#add8e6\",\n    \"lightcoral\": \"#f08080\",\n    \"lightcyan\": \"#e0ffff\",\n    \"lightgoldenrodyellow\": \"#fafad2\",\n    \"lightgray\": \"#d3d3d3\",\n    \"lightgreen\": \"#90ee90\",\n    \"lightpink\": \"#ffb6c1\",\n    \"lightsalmon\": \"#ffa07a\",\n    \"lightseagreen\": \"#20b2aa\",\n    \"lightskyblue\": \"#87cefa\",\n    \"lightslategray\": \"#778899\",\n    \"lightsteelblue\": \"#b0c4de\",\n    \"lightyellow\": \"#ffffe0\",\n    \"lime\": \"#00ff00\",\n    \"limegreen\": \"#32cd32\",\n    \"linen\": \"#faf0e6\",\n    \"magenta\": \"#ff00ff\",\n    \"maroon\": \"#800000\",\n    \"mediumaquamarine\": \"#66cdaa\",\n    \"mediumblue\": \"#0000cd\",\n    \"mediumorchid\": \"#ba55d3\",\n    \"mediumpurple\": \"#9370db\",\n    \"mediumseagreen\": \"#3cb371\",\n    \"mediumslateblue\": \"#7b68ee\",\n    \"mediumspringgreen\": \"#00fa9a\",\n    \"mediumturquoise\": \"#48d1cc\",\n    \"mediumvioletred\": \"#c71585\",\n    \"midnightblue\": \"#191970\",\n    \"mintcream\": \"#f5fffa\",\n    \"mistyrose\": \"#ffe4e1\",\n    \"moccasin\": \"#ffe4b5\",\n    \"navajowhite\": \"#ffdead\",\n    \"navy\": \"#000080\",\n    \"oldlace\": \"#fdf5e6\",\n    \"olive\": \"#808000\",\n    \"olivedrab\": \"#6b8e23\",\n    \"orange\": \"#ffa500\",\n    \"orangered\": \"#ff4500\",\n    \"orchid\": \"#da70d6\",\n    \"palegoldenrod\": \"#eee8aa\",\n    \"palegreen\": \"#98fb98\",\n    \"paleturquoise\": \"#afeeee\",\n    \"palevioletred\": \"#db7093\",\n    \"papayawhip\": \"#ffefd5\",\n    \"peachpuff\": \"#ffdab9\",\n    \"peru\": \"#cd853f\",\n    \"pink\": \"#ffc0cb\",\n    \"plum\": \"#dda0dd\",\n    \"powderblue\": \"#b0e0e6\",\n    \"purple\": \"#800080\",\n    \"rebeccapurple\": \"#663399\",\n    \"red\": \"#ff0000\",\n    \"rosybrown\": \"#bc8f8f\",\n    \"royalblue\": \"#4169e1\",\n    \"saddlebrown\": \"#8b4513\",\n    \"salmon\": \"#fa8072\",\n    \"sandybrown\": \"#f4a460\",\n    \"seagreen\": \"#2e8b57\",\n    \"seashell\": \"#fff5ee\",\n    \"sienna\": \"#a0522d\",\n    \"silver\": \"#c0c0c0\",\n    \"skyblue\": \"#87ceeb\",\n    \"slateblue\": \"#6a5acd\",\n    \"slategray\": \"#708090\",\n    \"snow\": \"#fffafa\",\n    \"springgreen\": \"#00ff7f\",\n    \"steelblue\": \"#4682b4\",\n    \"tan\": \"#d2b48c\",\n    \"teal\": \"#008080\",\n    \"thistle\": \"#d8bfd8\",\n    \"tomato\": \"#ff6347\",\n    \"turquoise\": \"#40e0d0\",\n    \"violet\": \"#ee82ee\",\n    \"wheat\": \"#f5deb3\",\n    \"white\": \"#ffffff\",\n    \"whitesmoke\": \"#f5f5f5\",\n    \"yellow\": \"#ffff00\",\n    \"yellowgreen\": \"#9acd32\"\n}\n\nfunction intToHexString(i) {\n    return pad(parseInt(i, 10).toString(16));\n}\n\nexport function hexToRgb(hex) {\n    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n    if (css_named_colors[hex.toLowerCase()]) {\n        hex = css_named_colors[hex.toLowerCase()];\n    }\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n        return r + r + g + g + b + b;\n    });\n\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n    } : null;\n}\n// given an object with r, g, and b keys, or a string of the form 'rgb(mm,nn,ll)', return a CSS hex string including the leading '#' character\nexport function rgbToHex(rgb) {\n    var r, g, b;\n    if (typeof(rgb) == 'object') {\n        r = rgb.r;\n        g = rgb.g;\n        b = rgb.b;\n    } else if (typeof(rgb.match) == 'function') {\n        var parts = rgb.match(/^rgb\\((\\d+),(\\d+),(\\d+)\\)$/);\n        if (parts) {\n            r = parts[1];\n            g = parts[2];\n            b = parts[3];\n        }\n    }\n    if (isNaN(r) || isNaN(b) || isNaN(g)) {\n        throw new TLError(\"invalid_rgb_err\");\n    }\n    return \"#\" + intToHexString(r) + intToHexString(g) + intToHexString(b);\n}\n\nexport function mergeData(data_main, data_to_merge) {\n    var x;\n    for (x in data_to_merge) {\n        if (Object.prototype.hasOwnProperty.call(data_to_merge, x)) {\n            data_main[x] = data_to_merge[x];\n        }\n    }\n    return data_main;\n}\n\nexport function isTrue(s) {\n    if (s == null) return false;\n    return s == true || String(s).toLowerCase() == 'true' || Number(s) == 1;\n}\n\n// like mergeData but takes an arbitrarily long list of sources to merge.\nexport function extend( /*Object*/ dest) /*-> Object*/ { // merge src properties into dest\n    var sources = Array.prototype.slice.call(arguments, 1);\n    for (var j = 0, len = sources.length, src; j < len; j++) {\n        src = sources[j] || {};\n        mergeData(dest, src);\n    }\n    return dest;\n}\n\nconst TRACE_HANDLERS = []\n\n/**\n * Register a callback to be executed when trace is called in this runtime.\n * Callbacks will be called with whatever was passed to `trace` which is \n * expected to be a string.\n * @param {callable} cb \n */\nexport function addTraceHandler(cb) {\n    TRACE_HANDLERS.push(cb)\n}\n\n\n/**\n * Pass the given `msg` to each registered trace handler.\n * This is a crude adaptation of the original Timeline trace\n * function which assumed access to a global `debug` flag.\n * \n * @param {string} msg \n */\nexport function trace(msg) {\n    TRACE_HANDLERS.forEach((cb) => {\n        try {\n            cb(msg)\n        } catch (e) {\n            if (console && console.log) {\n                console.log(\"Error handling trace\", e)\n            }\n        }\n    })\n}\n\n\nexport function pad(val, len) {\n    val = String(val);\n    len = len || 2;\n    while (val.length < len) val = \"0\" + val;\n    return val;\n}\n\nexport const stamp = (function() {\n    var lastId = 0,\n        key = '_tl_id';\n\n    return function( /*Object*/ obj) {\n        obj[key] = obj[key] || ++lastId;\n        return obj[key];\n    };\n}())\n\n/**\n * Remove any leading or trailing whitespace from the given string.\n * If `str` is undefined or does not have a `replace` function, return\n * an empty string.\n */\nexport function trim(str) {\n    if (str && typeof(str.replace) == 'function') {\n        return str.replace(/^\\s+|\\s+$/g, '');\n    }\n    return \"\";\n}\n\nexport function maxDepth(ary) {\n    // given a sorted array of 2-tuples of numbers, count how many \"deep\" the items are.\n    // that is, what is the maximum number of tuples that occupy any one moment\n    // each tuple should also be sorted\n    var stack = [];\n    var max_depth = 0;\n    for (var i = 0; i < ary.length; i++) {\n\n        stack.push(ary[i]);\n        if (stack.length > 1) {\n            var top = stack[stack.length - 1]\n            var bottom_idx = -1;\n            for (var j = 0; j < stack.length - 1; j++) {\n                if (stack[j][1] < top[0]) {\n                    bottom_idx = j;\n                }\n            };\n            if (bottom_idx >= 0) {\n                stack = stack.slice(bottom_idx + 1);\n            }\n\n        }\n\n        if (stack.length > max_depth) {\n            max_depth = stack.length;\n        }\n    };\n    return max_depth;\n}\n\n/**\n * Implement mixin behavior. Based on \n *     https://blog.bitsrc.io/understanding-mixins-in-javascript-de5d3e02b466\n * @param {class} cls \n * @param  {...class} src \n */\nexport function classMixin(cls, ...src) {\n    for (let _cl of src) {\n        for (var key of Object.getOwnPropertyNames(_cl.prototype)) {\n            cls.prototype[key] = _cl.prototype[key]\n        }\n    }\n}\n\nexport function ensureUniqueKey(obj, candidate) {\n    if (!candidate) { candidate = unique_ID(6); }\n\n    if (!(candidate in obj)) { return candidate; }\n\n    var root = candidate.match(/^(.+)(-\\d+)?$/)[1];\n    var similar_ids = [];\n    // get an alternative\n    for (let key in obj) {\n        if (key.match(/^(.+?)(-\\d+)?$/)[1] == root) {\n            similar_ids.push(key);\n        }\n    }\n    candidate = root + \"-\" + (similar_ids.length + 1);\n\n    for (var counter = similar_ids.length; similar_ids.indexOf(candidate) != -1; counter++) {\n        candidate = root + '-' + counter;\n    }\n\n    return candidate;\n}\n\nexport function isEmptyObject(o) {\n    var properties = []\n    if (Object.keys) {\n        properties = Object.keys(o);\n    } else { // all this to support IE 8\n        for (var p in o)\n            if (Object.prototype.hasOwnProperty.call(o, p)) properties.push(p);\n    }\n    for (var i = 0; i < properties.length; i++) {\n        var k = properties[i];\n        if (o[k] != null && typeof o[k] != \"string\") return false;\n        if (trim(o[k]).length != 0) return false;\n    }\n    return true;\n}\n\nexport function slugify(str) {\n    // borrowed from http://stackoverflow.com/a/5782563/102476\n    str = trim(str);\n    str = str.toLowerCase();\n\n    // remove accents, swap ñ for n, etc\n    var from = \"ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;\";\n    var to = \"aaaaaeeeeeiiiiooooouuuunc------\";\n    for (var i = 0, l = from.length; i < l; i++) {\n        str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));\n    }\n\n    str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars\n        .replace(/\\s+/g, '-') // collapse whitespace and replace by -\n        .replace(/-+/g, '-'); // collapse dashes\n\n    str = str.replace(/^([0-9])/, '_$1');\n    return str;\n}\n\nexport function unique_ID(size, prefix) {\n\n    var getRandomNumber = function(range) {\n        return Math.floor(Math.random() * range);\n    };\n\n    var getRandomChar = function() {\n        var chars = \"abcdefghijklmnopqurstuvwxyz\";\n        return chars.substr(getRandomNumber(32), 1);\n    };\n\n    var randomID = function(size) {\n        var str = \"\";\n        for (var i = 0; i < size; i++) {\n            str += getRandomChar();\n        }\n        return str;\n    };\n\n    if (prefix) {\n        return prefix + \"-\" + randomID(size);\n    } else {\n        return \"tl-\" + randomID(size);\n    }\n}\n\nexport function findNextGreater(list, current, default_value) {\n    // given a sorted list and a current value which *might* be in the list,\n    // return the next greatest value if the current value is >= the last item in the list, return default,\n    // or if default is undefined, return input value\n    for (var i = 0; i < list.length; i++) {\n        if (current < list[i]) {\n            return list[i];\n        }\n    }\n\n    return (default_value) ? default_value : current;\n}\n\nexport function findNextLesser(list, current, default_value) {\n    // given a sorted list and a current value which *might* be in the list,\n    // return the next lesser value if the current value is <= the last item in the list, return default,\n    // or if default is undefined, return input value\n    for (var i = list.length - 1; i >= 0; i--) {\n        if (current > list[i]) {\n            return list[i];\n        }\n    }\n\n    return (default_value) ? default_value : current;\n}\n\nexport function isEven(n) {\n    return n == parseFloat(n) ? !(n % 2) : void 0;\n}\n\nexport function findArrayNumberByUniqueID(id, array, prop, defaultVal) {\n    var _n = defaultVal || 0;\n\n    for (var i = 0; i < array.length; i++) {\n        if (array[i].data[prop] == id) {\n            _n = i;\n        }\n    };\n\n    return _n;\n}\n\nexport function unlinkify(text) {\n    if (!text) return text;\n    text = text.replace(/<a\\b[^>]*>/i, \"\");\n    text = text.replace(/<\\/a>/i, \"\");\n    return text;\n}\n\nexport function setData(obj, data) {\n    obj.data = extend({}, obj.data, data);\n    if (obj.data.unique_id === \"\") {\n        obj.data.unique_id = unique_ID(6);\n    }\n}\n\nexport function htmlify(str) {\n    //if (str.match(/<\\s*p[^>]*>([^<]*)<\\s*\\/\\s*p\\s*>/)) {\n    if (str.match(/<p>[\\s\\S]*?<\\/p>/)) {\n\n        return str;\n    } else {\n        return \"<p>\" + str + \"</p>\";\n    }\n}\n\nexport function unhtmlify(str) {\n    str = str.replace(/(<[^>]*>)+/g, '');\n    return str.replace('\"', \"'\");\n}\n\n/*\t* Turns plain text links into real links\n================================================== */\nexport function linkify(text, targets, is_touch) {\n\n    var make_link = function(url, link_text, prefix) {\n            if (!prefix) {\n                prefix = \"\";\n            }\n            var MAX_LINK_TEXT_LENGTH = 30;\n            if (link_text && link_text.length > MAX_LINK_TEXT_LENGTH) {\n                link_text = link_text.substring(0, MAX_LINK_TEXT_LENGTH) + \"\\u2026\"; // unicode ellipsis\n            }\n            return prefix + \"<a class='tl-makelink' href='\" + url + \"' onclick='void(0)'>\" + link_text + \"</a>\";\n        }\n        // http://, https://, ftp://\n    var urlPattern = /\\b(?:https?|ftp):\\/\\/([a-z0-9-+&@#\\/%?=~_|!:,.;]*[a-z0-9-+&@#\\/%=~_|])/gim;\n\n    // www. sans http:// or https://\n    var pseudoUrlPattern = /(^|[^\\/>])(www\\.[\\S]+(\\b|$))/gim;\n\n    // Email addresses\n    var emailAddressPattern = /([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+)/gim;\n\n\n    return text\n        .replace(urlPattern, function(match, url_sans_protocol, offset, string) {\n            // Javascript doesn't support negative lookbehind assertions, so\n            // we need to handle risk of matching URLs in legit hrefs\n            if (offset > 0) {\n                var prechar = string[offset - 1];\n                if (prechar == '\"' || prechar == \"'\" || prechar == \"=\") {\n                    return match;\n                }\n            }\n            return make_link(match, url_sans_protocol);\n        })\n        .replace(pseudoUrlPattern, function(match, beforePseudo, pseudoUrl, offset, string) {\n            return make_link('http://' + pseudoUrl, pseudoUrl, beforePseudo);\n        })\n        .replace(emailAddressPattern, function(match, email, offset, string) {\n            return make_link('mailto:' + email, email);\n        });\n}\n\n/**\n * Try to make seamless the process of interpreting a URL to a web page which embeds an image for sharing purposes\n * as a direct image link. Some services have predictable transformations we can use rather than explain to people\n * this subtlety.\n */\nexport function transformImageURL(url) {\n    return url.replace(/(.*)www.dropbox.com\\/(.*)/, '$1dl.dropboxusercontent.com/$2')\n}\n\nexport const ratio = {\n    square: (size) => {\n        var s = {\n            w: 0,\n            h: 0\n        }\n        if (size.w > size.h && size.h > 0) {\n            s.h = size.h;\n            s.w = size.h;\n        } else {\n            s.w = size.w;\n            s.h = size.w;\n        }\n        return s;\n    },\n    r16_9: (size) => {\n        if (size.w !== null && size.w !== \"\") {\n            return Math.round((size.w / 16) * 9);\n        } else if (size.h !== null && size.h !== \"\") {\n            return Math.round((size.h / 9) * 16);\n        } else {\n            return 0;\n        }\n    },\n    r4_3: (size) => {\n        if (size.w !== null && size.w !== \"\") {\n            return Math.round((size.w / 4) * 3);\n        } else if (size.h !== null && size.h !== \"\") {\n            return Math.round((size.h / 3) * 4);\n        }\n    }\n}\n\nexport function getUrlVars(string) {\n    var str,\n        vars = [],\n        hash,\n        hashes;\n\n    str = string.toString();\n\n    if (str.match('&#038;')) {\n        str = str.replace(\"&#038;\", \"&\");\n    } else if (str.match('&#38;')) {\n        str = str.replace(\"&#38;\", \"&\");\n    } else if (str.match('&amp;')) {\n        str = str.replace(\"&amp;\", \"&\");\n    }\n\n    hashes = str.slice(str.indexOf('?') + 1).split('&');\n\n    for (var i = 0; i < hashes.length; i++) {\n        hash = hashes[i].split('=');\n        vars.push(hash[0]);\n        vars[hash[0]] = hash[1];\n    }\n\n\n    return vars;\n}\n\nexport function getParamString(obj) {\n    var params = [];\n    for (var i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            params.push(i + '=' + obj[i]);\n        }\n    }\n    return '?' + params.join('&');\n}\n\nexport function getObjectAttributeByIndex(obj, index) {\n    if (typeof obj != 'undefined') {\n        var i = 0;\n        for (var attr in obj) {\n            if (index === i) {\n                return obj[attr];\n            }\n            i++;\n        }\n        return \"\";\n    } else {\n        return \"\";\n    }\n\n}\n\nlet base58 = (function(alpha) {\n    var alphabet = alpha || '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ',\n        base = alphabet.length;\n    return {\n        encode: function(enc) {\n            if (typeof enc !== 'number' || enc !== parseInt(enc))\n                throw '\"encode\" only accepts integers.';\n            var encoded = '';\n            while (enc) {\n                var remainder = enc % base;\n                enc = Math.floor(enc / base);\n                encoded = alphabet[remainder].toString() + encoded;\n            }\n            return encoded;\n        },\n        decode: function(dec) {\n            if (typeof dec !== 'string')\n                throw '\"decode\" only accepts strings.';\n            var decoded = 0;\n            while (dec) {\n                var alphabetPosition = alphabet.indexOf(dec[0]);\n                if (alphabetPosition < 0)\n                    throw '\"decode\" can\\'t find \"' + dec[0] + '\" in the alphabet: \"' + alphabet + '\"';\n                var powerOf = dec.length - 1;\n                decoded += alphabetPosition * (Math.pow(base, powerOf));\n                dec = dec.substring(1);\n            }\n            return decoded;\n        }\n    };\n})()\n\nexport { base58 }\n\n\nexport function parseYouTubeTime(s) {\n    // given a YouTube start time string in a reasonable format, reduce it to a number of seconds as an integer.\n    if (typeof(s) == 'string') {\n        let parts = s.match(/^\\s*(\\d+h)?(\\d+m)?(\\d+s)?\\s*/i);\n        if (parts) {\n            var hours = parseInt(parts[1]) || 0;\n            var minutes = parseInt(parts[2]) || 0;\n            var seconds = parseInt(parts[3]) || 0;\n            return seconds + (minutes * 60) + (hours * 60 * 60);\n        }\n    } else if (typeof(s) == 'number') {\n        return s;\n    }\n    return 0;\n}\n\nexport function stripMarkup(txt) {\n    var doc = new DOMParser().parseFromString(txt, 'text/html');\n    return doc.body.textContent || \"\";\n}"]},"metadata":{},"sourceType":"module"}